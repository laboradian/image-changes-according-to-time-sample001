class BackgroundCreator{constructor(){this.HOUR_EVENING_START=18,this.HOUR_NIGHT_START=19,this.HOUR_DAYTIME_START=7,this.R,this.G,this.B,this.A,this.dt,this.month,this.date,this.hour,this.dtDaytimeStart,this.dtEveningStart,this.dtNightStart,this.time_type=0,this.TIME_TYPE_CHANGE_TO_NOTHING=0,this.TIME_TYPE_CHANGE_TO_MORNING=1,this.TIME_TYPE_CHANGE_TO_EVENING=2,this.TIME_TYPE_CHANGE_TO_NIGHT=3,this.TIME_TYPE_NIGHT=4,this.HOURS_FROM_NIGHT_TO_DAYTIME=1,this.HOURS_FROM_DAYTIME_TO_EVENING=1,this.DAYTIME_COLOR={R:0,G:0,B:0,A:0},this.EVENING_COLOR={R:157,G:114,B:21,A:.2},this.NIGHT_COLOR={R:0,G:0,B:0,A:.4},this.currentColor={R:null,G:null,B:null,A:null}}update(t){switch(t?this.dt=t:(this.dt=moment(),this.dt.utcOffset("+0900")),this.month=this.dt.month()+1,this.date=this.dt.date(),this.hour=this.dt.hour(),this.month>=7&&this.month<=9&&(this.HOUR_DAYTIME_START=6),this.updateTimeType(),this.dtDaytimeStart=this.dt.clone().hour(this.HOUR_DAYTIME_START).minute(0).seconds(0),this.dtEveningStart=this.dt.clone().hour(this.HOUR_EVENING_START).minute(0).seconds(0),this.dtNightStart=this.dt.clone().hour(this.HOUR_NIGHT_START).minute(0).seconds(0),this.time_type){case this.TIME_TYPE_CHANGE_TO_MORNING:this.createBackgroundFromNightToDaytime();break;case this.TIME_TYPE_CHANGE_TO_EVENING:this.createBackgroundFromDaytimeToEvening();break;case this.TIME_TYPE_CHANGE_TO_NIGHT:this.createBackgroundFromEveningToNight();break;case this.TIME_TYPE_NIGHT:this.createBackgroundNight()}}updateTimeType(){this.hour>=this.HOUR_DAYTIME_START-this.HOURS_FROM_NIGHT_TO_DAYTIME&&this.hour<this.HOUR_DAYTIME_START?this.time_type=this.TIME_TYPE_CHANGE_TO_MORNING:this.hour>=this.HOUR_EVENING_START-this.HOURS_FROM_DAYTIME_TO_EVENING&&this.hour<this.HOUR_EVENING_START?this.time_type=this.TIME_TYPE_CHANGE_TO_EVENING:this.hour>=this.HOUR_EVENING_START&&this.hour<this.HOUR_NIGHT_START?this.time_type=this.TIME_TYPE_CHANGE_TO_NIGHT:this.hour>=this.HOUR_NIGHT_START||this.hour<this.HOUR_DAYTIME_START?this.time_type=this.TIME_TYPE_NIGHT:this.time_type=this.TIME_TYPE_CHANGE_TO_NOTHING}createBackgroundFromNightToDaytime(){const t=(this.dt.unix()-this.dtDaytimeStart.clone().subtract(this.HOURS_FROM_NIGHT_TO_DAYTIME,"hours").unix())/(3600*this.HOURS_FROM_NIGHT_TO_DAYTIME);this.currentColor=BackgroundCreator.calcCurrentValueOfColor(this.NIGHT_COLOR,this.DAYTIME_COLOR,t)}createBackgroundFromDaytimeToEvening(){const t=(this.dt.unix()-this.dtEveningStart.clone().subtract(this.HOURS_FROM_DAYTIME_TO_EVENING,"hours").unix())/(3600*this.HOURS_FROM_DAYTIME_TO_EVENING);this.currentColor=BackgroundCreator.calcCurrentValueOfColor(this.DAYTIME_COLOR,this.EVENING_COLOR,t)}createBackgroundFromEveningToNight(){const t=(()=>{const t=this.dtNightStart.unix()-this.dtEveningStart.unix();return(this.dt.unix()-this.dtEveningStart.unix())/t})();this.currentColor=BackgroundCreator.calcCurrentValueOfColor(this.EVENING_COLOR,this.NIGHT_COLOR,t)}createBackgroundNight(){this.currentColor=Object.assign({},this.NIGHT_COLOR)}getBackgroundColorString(){const t=this.currentColor;return`rgba(${parseInt(t.R)}, ${parseInt(t.G)}, ${parseInt(t.B)}, ${t.A})`}static calcCurrentValueOfColor(t,i,s){const h=(t,i,s)=>t<=i?t+(i-t)*s:t-(t-i)*s;return{R:h(t.R,i.R,s),G:h(t.G,i.G,s),B:h(t.B,i.B,s),A:h(t.A,i.A,s)}}translateToCurrentBackground(t,i){const s={R:0,G:0,B:0,A:0};let h;const r=moment().valueOf();let e,_;const T=()=>{(e=(moment().valueOf()-r)/(1e3*i))>=1?window.cancelAnimationFrame(h):(_=BackgroundCreator.calcCurrentValueOfColor(s,this.currentColor,e),t.style.backgroundColor=`rgba(${parseInt(_.R)}, ${parseInt(_.G)}, ${parseInt(_.B)}, ${_.A})`,h=window.requestAnimationFrame(T))};h=window.requestAnimationFrame(T)}}export default BackgroundCreator;